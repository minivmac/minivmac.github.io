<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><title> Gryphel Project News Volume 7 </title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="canonical" href="nva7.html"></head><body><div><i> <a href="../../index.html">www.gryphel.com</a>/c/<a href="index.html">news</a>/nva7- <a href="../feedback.html">feedback</a> </i></div><hr><h3 align=center>	Gryphel Project News</h3><h3 align=center>	Volume 7</h3><hr><p><a href="nva8.html#end">More Recent News</a>(<a href="index.html">Index</a>)</p><p>:</p><p><a name="n180909"> <b>September 9, 2018</b> </a>- <a href="nva7.html#n180909">permanent link</a></p><p>Today&rsquo;s <a href="../minivmac/beta.html">Mini vMac 36.01</a>is the first beta of the 36.xx branch. The<a href="../minivmac/change/v36.html">Changes page</a>lists differences from current stable 3.5.8 version.(The only change in the source code from the last Development snapshotis the version number.)</p><p>In other news,<a href="../minivmac/extras/autquit7/index.html">AutQuit7</a>is updated thanks to<a href="../mail/v8.html#m107">this report</a>.It now uses launchUseMinimum in launchControlFlags, so thatAutQuit7 can launch &ldquo;app&rdquo; even if thepreferred memory size is greater than the largest unused block.</p><p><a name="n180902"> <b>September 2, 2018</b> </a>- <a href="nva7.html#n180902">permanent link</a></p><p>Today&rsquo;s <a href="../minivmac/alpha.html">Development</a>source snapshot has some assorted fixes in preparationfor moving to beta.</p><p>Reconsidering a<a href="../mail/v7.html#m72">feedback about the control mode</a>,I changed my mind and decided that variations of Mini vMacwithout the control mode should not be supported. Thebuild system will now consider it an error if&ldquo;<a href="../minivmac/options.html#option_km">-km</a>&rdquo;options result in no key mapping to the control mode.</p><p>While in that area, if the &ldquo;control&rdquo; key is not mappedto the control mode, but some other key is, the user interfacestrings are now adjusted.</p><p>Also, when using the &ldquo;-km&rdquo; options, it may notmake sense for the K command of the control mode to togglethe emulated control key. There is a new option&ldquo;<a href="../minivmac/options.html#option_ekt">-ekt &lt;dst&gt;</a>&rdquo;to choose which emulated key to toggle.The user interface strings are adjusted accordingly.When this option is notchosen, Mini vMac will pick an emulated key that is not mappedto any real key, instead of always the control key.</p><p>I have concluded that &ldquo;Abnormal Situation&rdquo; reportsin the regular non debug versions of Mini vMac are not on the wholehelpful, and so are now disabled by default. There is a newcompile time option&ldquo;<a href="../minivmac/options.html#option_abr">-abr 1</a>&rdquo;to enable them.</p><p>I spent a few days tracking down a twice<a href="../mail/v8.html#m101">reported</a><a href="../mail/v7.html#m54">issue</a>when compiling with Microsoft Visual Studio 2017.It worked fine with an older version of Studio 2017 that I had, but onceI downloaded the latest version, I was able to reproduce the problem.Turning off optimization made the problem go away. This compilerprovides a way to set optimization level per function, so Iwas able to narrow it down to single simple function, where itwas generating an &ldquo;shr&rdquo; instruction when it should have been an&ldquo;sar&rdquo; instruction. I don&rsquo;t see any way this isundefined C behavior, so it looks like a compiler bug.To maximize the chance of a correct compile, I have changed theMini vMac build system to disable optimization for this compiler.(This compiler is not used for the versions of Mini vMacthat I provide.)</p><p>Trying to using the Location and Time Zone options(<a href="../minivmac/options.html#option_alc">-alc, -lcy, -lcx</a>,<a href="../minivmac/options.html#option_atz">-atz, -lcd, -lczs, -lcz</a>)when emulating a Mac 128K, 512K, or 512Ke will now generate an error.These options are saved in the Extended Parameter RAM, which thesemachines don&rsquo;t have.</p><p><a name="n180826"> <b>August 26, 2018</b> </a>- <a href="nva7.html#n180826">permanent link</a></p><p>Today&rsquo;s <a href="../minivmac/alpha.html">Development</a>source snapshot removes the length limit on the Control-P command tocopy the variations options, and adds an option to disablecode signing.</p><p>Previously, converting a string from a cross platform C string constantto a representation that can be placed on the host clipboard involved afixed sized buffer. Now that part of the conversion is done in twopasses, first to find the length of the result, and second to actuallyproduce the result. (The fixed size was 512 bytes, so it would beunusual to have hit this limit. It would need quite a lot of variationoptions.)</p><p>While in this area, I added the &ldquo;copy variation options&rdquo;command to the list in the help screen (Control-H). It would benice to have translations of this string, and alsothe string &ldquo;Variation options copied&rdquo;, to theother ten languages supported by Mini vMac 36.</p><p>Also while in this area, I noticed that in the help screen, theoriginal intent appears to have been that the letters on theleft would be surrounded by single quotes. But that displayinga single quote wasn&rsquo;t implemented properly and showed upas space. After implementing displaying the single quote, I thinkit looks better without. However, I noticed that precedingthe &ldquo;-&rdquo; there are two spaces, since one was supposedto be the single quote. Somehow I never noticed this before.I have changed that to a single space.</p><p>Recently code signing has been added to the Cocoa OS X version ofMini vMac. But it has disadvantages. Apple could chooseto revoke the certificate any time, and Mini vMac would stopworking. Also, since Mini vMac doesn&rsquo;t use Apple&rsquo;stime stamp server (because that would break reproducible builds),Mini vMac will probably stop working when the certificate expires,5 years after being issued. (The plan is to renew the certificateevery year, so that a compile of Mini vMac should work for atleast 4 years.)</p><p>Some people may prefer to avoid these issues, so I haveadded an &ldquo;-sgn 0&rdquo; option to disable code signing.The disadvantage is that OS X will by default refuse to run it(as happens with Mini vMac 3.5). This new option can beused in the<a href="../minivmac/a_vara.html">Advanced Variations Service</a>.</p><p><a name="n180819"> <b>August 19, 2018</b> </a>- <a href="nva7.html#n180819">permanent link</a></p><p>Today&rsquo;s <a href="../minivmac/alpha.html">Development</a>source snapshot adds a<a href="../minivmac/local/sr_latn.html">Serbian translation</a><a href="../mail/v8.html#m102">contributed</a>by SerbXenomorph. This translation uses the Latin alphabet.SerbXenomorph contributed the translation in the Cyrillic alphabet,which was converted to the Latin alphabet withmultiple online conversion services, which all gave the same result.It would take much more work for Mini vMac to support theCyrillic alphabet, in its private cross platform font. Maybe someday.(According to Wikipedia, &ldquo;Serbian is practically the onlyEuropean standard language whose speakers are fully functionallydigraphic, using both Cyrillic and Latin alphabets.&rdquo;)</p><p>Today&rsquo;s snapshot also adds a new compile time option,&ldquo;<a href="../minivmac/options.html#option_sbx">-sbx 1</a>&rdquo;,to enable Sandboxing in the Cocoa version for OS X. This is an Applesecurity mechanism, so that any bugs, or even maliciousness, in MinivMac can only do limited harm. This option might be the default in afuture version of Mini vMac. However,it does remove some capabilities. The single requested&ldquo;entitlement&rdquo; allows Mini vMac to read and write filesthat the user has selected, with the Open File dialog, or bydragging into the Mini vMac window or icon.</p><p>But Mini vMac&rsquo;s ability to automatically find files by namein special locations is severely restricted.It is prevented from finding &ldquo;vMac.ROM&rdquo;,&ldquo;disk1.dsk&rdquo;, &ldquo;disk2.dsk&rdquo;, etc. in the foldercontaining the application.It can find such files in a &ldquo;mnvm_dat&rdquo; folder created<a href="../minivmac/hardware.html#rom">inside the application</a>,but only read only. It does not have access to&ldquo;~/Library/Preferences&rdquo; to find &ldquo;vMac.ROM&rdquo; (but itdoes get access to the corresponding folder inside itscontainer folder, which is obscure).It does have read only acces to&ldquo;/Library/Application Support/&rdquo;.Furthermore, if these named files are links thatwon&rsquo;t work unless the file linked to is in one of the fewplaces that a Sandboxed application has access to.</p><p>The Cocoa version for OS X now looks for the ROM image in oneadditional place,&ldquo;/Library/Application Support/Gryphel/mnvm_rom/&rdquo;,which can be read by a Sandboxed application.</p><p><a name="n180812"> <b>August 12, 2018</b> </a>- <a href="nva7.html#n180812">permanent link</a></p><p>I&rsquo;ve changed my mind, and will trying using Apple&rsquo;scode signing for the Macintosh OS X port, for 64 bits. This isimplemented in the<a href="../minivmac/a_var.html">Mini vMac 36 Alpha Variations Service</a>as of today. This allows Mini vMac to run on OS X without havingto bypass Apple&rsquo;s GateKeeper feature.</p><p>Hopefully, what I&rsquo;ve implemented will work without causingtoo many problems. Normallysigning an application involves requesting a signed time stamp froman Apple server. This is impractical for the Variations Service.And another problem is the result of this depends on the currenttime, which breaks the build process of compiling twice andchecking for an exact match.</p><p>But it turns out to be possible to instruct the code signing tool to notdo the time stamp. One possible consequence is that the application maystop working when the signing certificate expires in 5 years, since theapplication doesn&rsquo;t have a signed time stamp to prove it wascompiled before that. If I get a new signing certificate from Appleevery year, this may not be too much of a problem.</p><p> ------ </p><p>Thanks toScott Rickard, Anonymous, Trevor Glahn, Leonid, Chris Hanson,and Henry Shawcrossfor <a href="../wishlist/index.html">sponsoring</a>one month of web hosting for the Gryphel projectand over 4 days of health insurance.</p><p><a name="n180805"> <b>August 5, 2018</b> </a>- <a href="nva7.html#n180805">permanent link</a></p><p>The latest Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot fixes support for all supported IDEs in the newconfiguration tool. The new tool always uses the equivalentof  &ldquo;-cfg 1 -no-src 1&rdquo; in the old build system,but these options were previously only implementedfor &ldquo;-e mvc&rdquo;.</p><p>Also, Apple Xcode 9.4.1 is now supported.</p><p>And also, a memory leak is fixed in the Cocoa port for OS X,when exporting the clipboard. This was found by the XcodeAnalyze feature.</p><p><a name="n180729"> <b>July 29, 2018</b> </a>- <a href="nva7.html#n180729">permanent link</a></p><p>The latest Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot adds a new way of finding the ROM image.</p><p>It was pointed out to me that using undocumented calls isnot a good idea, so I have disabled the new code for workingaround the silly Path Randomization misfeature of OS X,which prevents finding the ROM image in the folder containingMini vMac.</p><p>Instead, on all platforms (not just OS X), if the ROM image isnot found in any of the locations that Mini vMaclooks, the error can now be recovered from. You can drag the ROM imageonto Mini vMac, and booting will resume. (Any of the methodsthat would normally mount a disk image will work to get the ROM,such as the Open dialog.)</p><p><a name="n180722"> <b>July 22, 2018</b> </a>- <a href="nva7.html#n180722">permanent link</a></p><p>Using the new (old) configuration tool, and some other techniques, the<a href="../minivmac/a_var.html">Mini vMac 36 Alpha Variations Service</a>and corresponding<a href="../minivmac/a_vara.html">Advanced Variations Service</a>now only takes around 5 seconds for the preliminary result, down from10 last week. Instead of generating a temporary page when the requestis made, the cgi script waits for the preliminary result to becomeavailable.</p><p>The latest Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot merges in some fixes to theconfiguration tool from Ryan.</p><p><a name="n180715"> <b>July 15, 2018</b> </a>- <a href="nva7.html#n180715">permanent link</a></p><p>The latest Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot tries out backtracking a bit in the build system.Instead of a 68k Macintosh program to generate files to compile,it uses a cross platform standard C command line tool to generatea script to write configuration files, as was done priorto Mini vMac 3 over a decade ago.</p><p>This should allow the Variations Service to be more efficient,and is also more convenient for experienced programmers.The trade off is in making it harder for others to compile their ownvariations. Now I would prefer for people to use theVariations Service, and this is not only because of the fundingmodel. Helping beginners figure out how to compile does notscale. And trying to making Mini vMac work well with randomversions of random compilers also does not scale.With the Variations Service I can ensure quality of thecompiled variations. The Variations Service has greatly improvedin past months, fully automatic with 30 second turnaround(and still getting faster).</p><p>The source snapshot is now a standard compressed archive,in &ldquo;.tgz&rdquo; format. The source for the configurationtool is in &ldquo;setup&rdquo;folder. In a unix like systemit can be compiled using something like&ldquo;gcc setup/tool.c -o setup_t&rdquo;, then run with somethinglike &ldquo;./setup_t -t mc64 &gt; setup.sh&rdquo;, and the outputrun with &ldquo;. ./setup.sh&rdquo;, and then Mini vMac can becompiled with &ldquo;make&rdquo;.</p><p>The new configuration tool is still a work in progress. Itshould be better documented when it is more settled.</p><p><a name="n180708"> <b>July 8, 2018</b> </a>- <a href="nva7.html#n180708">permanent link</a></p><p>The latest Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot merges in a number of fixes fromRyan.</p><p>The &ldquo;-min-extn&rdquo; option<a href="../mail/v7.html#m76">wasn&rsquo;t working</a>after the addition of the &lsquo;P&rsquo; command of theControl Mode (for getting the compile time options).</p><p>The source image is now larger so that &ldquo;-all-src 1&rdquo;<a href="../mail/v8.html#m85">can work</a>.</p><p>In the Cocoa version for OS X, the keyNSHighResolutionCapable has been added to theInfo.plist file, so that the Mini vMac window frame will draw in<a href="../mail/v8.html#m86">higher resolution on a Retina screen</a>.</p><p>There is a new compile time option,&ldquo;<a href="../minivmac/options.html#option_gse">-gse 1</a>&rdquo;,for the Cocoa version for OS X, which on computers with more thanone GPU allows the operating system to change which one is used.Otherwise on a MacBook pro,<a href="../mail/v8.html#m89">it is reported</a> thatthe higher power discrete GPU is always used instead of thelower power integrated GPU, and that besides wasting power for nonoticable benefit, it also takes time to switch on the discrete GPUwhen Mini vMac starts.<b>update</b> : I seem to have missed part of this patch.This will be fixed next snapshot.</p><p>&ldquo;-gse 1&rdquo; should probably become the default in thefuture. But I don&rsquo;t have a MacBook pro to test it on, andI have a few questions about it.</p><p>A bug is fixed in the new &ldquo;-svd 0&rdquo; option,where in the Cocoa version in OS X 10.6 and prior, the<a href="../mail/v8.html#m92">&ldquo;out&rdquo; folderwould not be created</a>, if didn&rsquo;t already exist.</p><p><a name="n180701"> <b>July 1, 2018</b> </a>- <a href="nva7.html#n180701">permanent link</a></p><p>&ldquo;www.gryphel.com&rdquo; is now HTTPS only, followingcurrent recommendation. Access to unencrypted HTTP ispermanently redirected to the encrypted page.</p><p>If you want to access this website with very old web browsers,there is now<a href="http://www.gryphel.org" rel="nofollow">http://www.gryphel.org</a>,which has the same content, hosted by the same web server, butit works with unencrypted HTTP.</p><p>Due to travel, there won&rsquo;t be a new development source snapshotuntil next week. Ryan has contributed a<a href="../mail/v8.html">number of fixes</a>.</p><p><a name="n180624"> <b>June 24, 2018</b> </a>- <a href="nva7.html#n180624">permanent link</a></p><p>The gryphel.com domain now points to new server. It may take upto a few days for this change to propagate across the entireinternet. (If your DNS hasn&rsquo;t updated yet, you will stillget the old server.)</p><p>The new server and old server are currently identical forgryphel.com, except that the new server supports HTTPSencryption, i.e.<a href="../../index.html" rel="nofollow">https://www.gryphel.com</a>.</p><p>In a few days, when the older server is no longer being used,and if everything looks good, any access to an unencrypted page like<a href="../../index.html" rel="nofollow">http://www.gryphel.com</a>will be permanently redirected to the encrypted page.So if you notice problems with the encrypted pages, let me know now.</p><p>For very old web browsers that don&rsquo;t support modern HTTPS,there is now<a href="http://www.gryphel.org" rel="nofollow">http://www.gryphel.org</a>.It is handled by the same new server, but this domain willnot be redirected to HTTPS.</p><p><a name="n180617"> <b>June 17, 2018</b> </a>- <a href="nva7.html#n180617">permanent link</a></p><p>I&rsquo;ve decided it is time for this website to support HTTPS(encryption), mostly to make Google search and web browsershappy. Rather than making the changes on the current web serverand hoping it all works, I set up a new web serverwith up to date software, and if all works well, will switchthe gryphel.com domain to it.</p><p>Current recommendation is to force browsers to use HTTPS, andeven for HTTPS not support some of the older versions. But thiswebsite is intended to work with the oldest web browsers.To satisfy both, this website will be available on two differentdomains: &ldquo;gryphel.com&rdquo; will use HTTPS, and&ldquo;gryphel.org&rdquo; is for HTTP.</p><p><a href="http://www.gryphel.org" rel="nofollow">http://www.gryphel.org</a> currentlyworks for static content. (Supporting the Variations Service andthe feedback form is yet to come.)<a href="https://www.gryphel.online" rel="nofollow">https://www.gryphel.online</a>is the current location of the HTTPS version. When everything isworking properly, gryphel.com will be changed to work as gryphel.onlinedoes, and gryphel.online will probably be removed. (&lsquo;gryphel.online&rdquo;is a free sample domain from my registrar.)</p><p>While there are two web servers, any changes to this site haveto be made on both of them. So hopefully this transition periodwill be short.</p><p>If you notice problems with the new web server, let me know. Atmy location, the HTTP version seems at least as fast as theold web server, and HTTPS is less than twice as slow. HTTPStakes more round trips to the server to set up, so may be evenslower from locations further from eastern US.</p><p>I considered supporting HTTP/2, which speeds up modern websitesthat access lots of different resources, but for this minimalistwebsite, it seems more likely to just add a bit moreoverhead, and possibly compatibility issues. I also consideredIPv6, which seems simple to support on the web server,but neither of the two internet connections I have available supportit, so I can&rsquo;t support it.</p><p><a name="n180610"> <b>June 10, 2018</b> </a>- <a href="nva7.html#n180610">permanent link</a></p><p>Today&rsquo;s Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot fixes a<a href="../mail/v7.html#m75">reported</a> bug wherethe Control Mode didn&rsquo;t work on ports other than OS X.This was broken when the &ldquo;-km&rdquo; option was added.</p><p>Also, I&rsquo;ve put in a work around for thePath Randomization misfeature added in macOS Sierra (10.12).If an application that Apple thinks is trustworthy is bundledtogether with malicious library code in the same folder, themalicious code may be run by the application. The silly way that Applehas chosen to prevent this is to in effect move the applicationsomewhere else before running it, so it can&rsquo;t find the librarycode. It can&rsquo;t find anything else in the application&rsquo;sfolder either, which is a problem for Mini vMac, which looks for thingsin its folder, such as the ROM image file. So now the Cocoa portof Mini vMac will try to find the original location of theapplication, and use that instead of the location it is running from,when looking for the ROM image and other things.(Mini vMac doesn&rsquo;t look for external library code,so Path Randomization has no benefit.)This is doneusing some undocumented SecTranslocate calls as suggested by&ldquo;<a href="https://objective-see.com/blog/blog_0x15.html">Objective-See</a>&rdquo;and<a href="https://lapcatsoftware.com/articles/detect-app-translocation.html">Jeff Johnson</a>.Previously, I have recommended using&ldquo;xattr -rc &lt;path to Mini vMac&gt;&rdquo;from the command line to disable Path Randomization. This willno longer be needed for Mini vMac 36.</p><p><a name="n180603"> <b>June 3, 2018</b> </a>- <a href="nva7.html#n180603">permanent link</a></p><p>This week I&rsquo;ve tried to make the<a href="../var/index.html">Variations Service</a>automatically recover from the sort of network failure thathappens every few weeks or so (or sometimes two days in arow). Previously the service would stop working until I noticedand fixed it manually.</p><p>I&rsquo;ve also tried to make the Gryphel web server a bit more robustin some situations.</p><p><a name="n180527"> <b>May 27, 2018</b> </a>- <a href="nva7.html#n180527">permanent link</a></p><p>Today&rsquo;s Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot adds the new build system options&ldquo;<a href="../minivmac/options.html#option_alc">-alc, -lcy, and -lcx</a>&rdquo;to allow manually setting the location fieldsin the Parameter RAM, and the options&ldquo;<a href="../minivmac/options.html#option_atz">-atz, -lcd, -lczs, and -lcz</a>&rdquo;to allow manually setting the time zone fields.</p><p>The&ldquo;<a href="../minivmac/extras/getpram/index.html">GetPRAM</a>&rdquo;tool has been updated to support these location and time zone options.</p><p>These Parameter RAM fields are not much used. Two example programs thatcan use the location fields are<a href="../sw/astro/macastro/index.html">MacAstro</a>and<a href="../sw/astro/staratls/index.html">Star Atlas</a>.</p><p><a name="n180520"> <b>May 20, 2018</b> </a>- <a href="nva7.html#n180520">permanent link</a></p><p>The<a href="../minivmac/a_var.html">Mini vMac 36 Alpha Variations Service</a>and corresponding<a href="../minivmac/a_vara.html">Advanced Variations Service</a>now only take 10 seconds for the preliminary result, down from15 last week. (And 20 seconds total, down from 30.)</p><p>This was made possible in part by a new compile time option intoday&rsquo;s Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot.&ldquo;<a href="../minivmac/options.html#option_svd">-svd 0</a>&rdquo;disables the save dialog for OS X and Windows when exporting afile (as used by the Mini vMac extra<a href="../minivmac/extras/exportfl/index.html">ExportFl</a>and other tools). Instead the exported file is saved in a foldernamed &ldquo;out&rdquo; without a dialog, as was previously donein the Linux version. This makes it easier to run Mini vMacin an automated script and get results out.</p><p>Another change is that when the recently added&ldquo;<a href="../minivmac/develop.html#option_ef">-ef 1</a>&rdquo;option is used to save errors to a file, the error file will beexported to the real computer, rather than staying in the emulatedcomputer as before. (Unless&ldquo;<a href="../minivmac/develop.html#option_nex">-nex</a>&rdquo;is also used.)</p><p>There is also another new option&ldquo;<a href="../minivmac/develop.html#option_no_src">-no-src 1</a>&rdquo;to only generate the configuration files and not save the sourcefiles.When the options&ldquo;<a href="../minivmac/develop.html#option_cfg">-cfg 1</a>&rdquo;and&ldquo;<a href="../minivmac/develop.html#option_all_src">-all-src 1</a>&rdquo;are used together, the generated source folder is identical forall variations. So it could save time to not generate it. Butit doesn&rsquo;t seem to be a significant amount of time, so thevariation servce is not yet using the &ldquo;-no-src&rdquo; option.</p><p>Some additional speed was gained in the Alpha Variations Serviceby using ssh multiplexing.</p><p><a name="n180513"> <b>May 13, 2018</b> </a>- <a href="nva7.html#n180513">permanent link</a></p><p>There are changes to the<a href="../minivmac/a_var.html">Mini vMac 36 Alpha Variations Service</a>and corresponding<a href="../minivmac/a_vara.html">Advanced Variations Service</a>.Instead of compiling the requested variation twice, verifyingthey match, and then presenting the result, it will now compileonce, present a preliminary result, and then compile again, verify,and present a final result.</p><p>So it now only takes 15 seconds instead of 30 to get to the pointof downloading your variation (and you can verify the checksumand signature). Before actually running the variation, you shouldwait for the download page to update with the final result, whichshould only take another 15 seconds.</p><p>Another change is that the Alpha Variation Service is nowreproducible. That is, if you ask for the same options twice, youwill get the exact same application archive. (The file namewill be different, but the contents are the same.) Previouslydifferent variation requests would get applications with differentnames, like &ldquo;mvm10280&rdquo; and &ldquo;mvm10281&rdquo;,which made the resulting archives different, even though thecompile process was otherwise reproducible.Now all variations get the same name &ldquo;minivmac&rdquo;,and the application archives are renamed to something unique asa final step.The Sponsor Code used does not effect the resulting Variation,so two sponsors requesting the same variation will get thesame result. (With no Sponsor Code, a demo is created, whichis different from the sponsored variation.)</p><p>Today&rsquo;s Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot has a fix to allow the Alpha Variations Serviceto report errors correctly. The simplest way to fix it wasto remove the option of using &ldquo;;&rdquo; to allowmultiple variations in one run. The new Alpha Variations Serviceno longer uses this, it always processes one variation at a time,and never in larger batches. (Larger batches would not workproperly since all variations now all have the same name.)</p><p>Another change is that the build system now will report thename of an unrecognized option in the error message, not justhilighting it, to allow the Advanced Variations Service to work better.</p><p> ------ </p><p>Thanks toHerb Mann, Sam Coupe, Michael Cremer, Callum Fraser, Roland Zimmerman,Ian Dunbar, Chris Hanson, and Henry Shawcrossfor <a href="../wishlist/index.html">sponsoring</a>one month of web hosting for the Gryphel projectand over 6 days of health insurance.</p><p><a name="n180506"> <b>May 6, 2018</b> </a>- <a href="nva7.html#n180506">permanent link</a></p><p>Today&rsquo;s Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot adds a new build system option&ldquo;<a href="../minivmac/options.html#option_km">-km &lt;src&gt; &lt;dst&gt;</a>&rdquo;,for changing the mapping between keys on the real Keyboard and keys onthe emulated Keyboard, or the Mini vMac Control Mode.</p><p><a name="n180429"> <b>April 29, 2018</b> </a>- <a href="nva7.html#n180429">permanent link</a></p><p>Today&rsquo;s Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot adds the new build system options&ldquo;<a href="../minivmac/options.html#option_hc">-hcr, -hcg, and -hcb</a>&rdquo;,to select the initial value of red, green, and blue componentsof the highlight color in the Parameter RAM. This was<a href="../mail/v5.html#m38">requested</a>by Karl.</p><p>The new&ldquo;<a href="../minivmac/extras/getpram/index.html">GetPRAM</a>&rdquo;tool can be used to get the numeric values these options require.It gets <a href="../minivmac/hardware.html#pram">Parameter RAM</a>settings in a format that can be used with thethe Mini vMac build system or the new<a href="../minivmac/a_vara.html">Advanced Variations Service</a>.So you first use the Macintosh Control Panels toselect the desired settings, thenlaunch GetPRAM.</p><p>Also in today&rsquo;s snapshot, the error message generatedby the build system always include the name of the option which had theproblem, making error messages from theAdvanced Variations Service more useful. (If you use thebuild system application directly, not telling it to save error messagesto a file and quit, it would usually highlight the text of where theproblem was.)</p><p><a name="n180422"> <b>April 22, 2018</b> </a>- <a href="nva7.html#n180422">permanent link</a></p><p>There is now an<a href="../minivmac/a_vara.html">Advanced Variations Service</a>for Mini vMac 36 Alpha, where options are entered astext, instead of the long list of controls in the regular<a href="../minivmac/a_var.html">Variations Service</a>that is getting unwieldy as more and more options are added.(The plan is to remove all but the most popular options fromthe regular Variations Service and call it theBasic Variations Service.)</p><p>The Advanced Variations Service is actually easier touse than the regular Variations Service when you want somethingmostly like a variation you already have, because ofthe new &lsquo;P&rsquo; command of the Mini vMac Control Mode to get theoptions of an existing variation.</p><p><a name="n180415"> <b>April 15, 2018</b> </a>- <a href="nva7.html#n180415">permanent link</a></p><p>Today&rsquo;s Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot adds a number of features to the build system.The motivation is that the<a href="../var/index.html">Variations Service</a>page gets unwieldy as more and more options are added. So I&rsquo;mthinking of instead having a Basic Variations Service, which onlyhas the most popular options, and a new Advanced Variations Service,which allows pasting in options as text. (With the new&lsquo;P&rsquo; command of the Mini vMac<a href="../minivmac/control.html#control_mode">Control Mode</a>to get the options of an existing variation,you would be able to easily update a variation.)</p><p>If the new option&ldquo;<a href="../minivmac/develop.html#option_at">@</a>&rdquo;is used, no developer options are permitted to the right ofit. This will allow the Variations Service to allow theuser to specify options as text without the chance of breakingthe service. (For example, the &lsquo;-e&rsquo; option to select thethe development environment would not work well.)</p><p>The new option&ldquo;<a href="../minivmac/develop.html#option_ef">-ef 1</a>&rdquo;causes the build system to write error messages toa text file, instead of displaying an alert dialog. This will allowthe Variations Service to allow the user to specify options as text,and get any error messages, such as about bad syntax, back to the webpage shown to the user, rather than breaking the service.</p><p>If the new option&ldquo;<a href="../minivmac/options.html#option_xclm">!</a>&rdquo;is used, options to the right of it will override options to the leftof it. Normally it would be an error for the same option tobe used twice. It is still an error foran option to be used twice on the same side of &lsquo;!&rsquo;.</p><p>The new option&ldquo;<a href="../minivmac/options.html#option_cte">-cte 1</a>&rdquo;causes the build system to generate sourcecode that causes the compiler to generate an error. Thisis for testing the variation service.</p><p>If the new option&ldquo;<a href="../minivmac/options.html#option_bte">-bte</a>&rdquo;is used, the build system will treat it asan error. This is for testing the variation service.</p><p><a name="n180408"> <b>April 8, 2018</b> </a>- <a href="nva7.html#n180408">permanent link</a></p><p><a href="../sw/text/wordmake/index.html">WordMaker 1.0.4</a>,a word processor, has been added to the software hosted by the GryphelProject. Josef of Team Amiga Source Code Preservation<a href="../mail/v7.html#m55">notified</a> me that they hadobtained the source code and permission to GPL it,among a batch of other software, mostly for Amiga, originally fromNew Horizons Software, Inc.</p><p><a name="n180401"> <b>April 1, 2018</b> </a>- <a href="nva7.html#n180401">permanent link</a></p><p>Today&rsquo;s Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot adds a new&lsquo;P&rsquo; command to the Mini vMac<a href="../minivmac/control.html#control_mode">Control Mode</a>, whichcopies to the clipboard (of the real computer, not the emulatedcomputer) a string containing the options describing thisvariation of Mini vMac.</p><p>The string generated by the &lsquo;P&rsquo; commandstarts with a new option,&ldquo;<a href="../minivmac/options.html#option_iid">-br</a>&rdquo;,which is for future use and currently has no effect.It tells the build system that the requested options were from aspecific branch (version) of Mini vMac.So &ldquo;-br 36&rdquo; means from branch 36.If the defaultsettings have changed from since that older version,then the build system will use defaults of the old version,rather than the current defaults. So if you use the&lsquo;P&rsquo; command on some variation of the current alpha versionof Mini vMac, and pass it to the build system of some future version,the newly generated variation will behave as close as possibleto the earlier variation.</p><p>There are three new build options that may have different defaultsin some future version:&ldquo;<a href="../minivmac/options.html#option_eci">-eci</a>&rdquo;,&ldquo;<a href="../minivmac/options.html#option_ecr">-ecr</a>&rdquo;, and&ldquo;<a href="../minivmac/options.html#option_eck">-eck</a>&rdquo;.They can be used to disable the &lsquo;I&rsquo;, &lsquo;R&rsquo;,and &lsquo;K&rsquo; commands of the Mini vMac control mode, whichare use to operate the emulated Interrupt Button, emulated Reset Button,and emulated Control Key. In the future they may be disabled bydefault. In the original Macintosh, the Interrupt and Reset buttons weredisabled by default. You needed to install the&ldquo;Programmer&rsquo;s Switch&rdquo; to use them.The original Macintosh did not have a control key. And, usingthe &lsquo;K&rsquo; command accidently would be confusing.</p><p><a name="n180325"> <b>March 25, 2018</b> </a>- <a href="nva7.html#n180325">permanent link</a></p><p>Today&rsquo;s Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot adds a new build option&ldquo;<a href="../minivmac/options.html#option_iid">-iid 1</a>&rdquo;to enable a new &ldquo;Insert Ith Disk Image&rdquo; feature.When this feature is enabled, if the Control key is held downand a number key from &lsquo;1&rsquo; to &lsquo;9&rsquo; is pressed,then Mini vMac will try to mount a disk image named from "disk1.dsk" to"disk9.dsk" in the folder containing the application.</p><p>This is the same series of disk image names that are automaticallymounted when Mini vMac is launched. But it stops at the firstimage not found. So if you leave a name unused, then you canuse a control-number key to mount disks after launch. Or, youcan use a control-number key to remount a disk that was automaticallymounted at launch and then later ejected.</p><p>One example use is if you have one copy of Mini vMac runninga development environment (such as MPW) that is used to compilea program to a disk image. The disk image is then unmountedand mounted on another copy of Mini vMac running a testingenvironment. If the compiled program crashes badly, thedevelopment environment is not disturbed. The control-number keyfeature makes it easier to move the disk image backand forth between the two copies of Mini vMac.</p><p>Also, the version numbering scheme has changed as of thissnapshot. Instead of &ldquo;3.6.0&rdquo;, it is &ldquo;36.00&rdquo;.The distinction between major and minor version numbers has not beenuseful. Instead there is now a single branch number. This allowsmore bug fix releases (up to 99 instead of up to 9) without takingmore space in the version string.</p><p>And also with this snapshot, the<a href="../minivmac/a_var.html">Mini vMac Alpha Variations Service</a>and the<a href="../minivmac/change/v36.html">Alpha Changes list</a>are back.</p><p><a name="n180318"> <b>March 18, 2018</b> </a>- <a href="nva7.html#n180318">permanent link</a></p><p>SigCheck, SigWrite, and MakeKeys have been updated and renamed to<a href="../minivmac/extras/psgcheck/index.html">PSgCheck</a>,<a href="../minivmac/extras/psgwrite/index.html">PSgWrite</a> and<a href="../minivmac/extras/pmakkeys/index.html">PMakKeys</a>.They are being replaced by a similar set of tools, with the same names,that use a different format for keys and signatures (instead of formatsthat are sort of but not quite compatible with MacPGP):<a href="../minivmac/extras/sigcheck/index.html">SigCheck</a>,<a href="../minivmac/extras/sigwrite/index.html">SigWrite</a> and<a href="../minivmac/extras/makekeys/index.html">MakeKeys</a>.</p><p><a name="n180311"> <b>March 11, 2018</b> </a>- <a href="nva7.html#n180311">permanent link</a></p><p>Today&rsquo;s Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot fixes a bug in emulating the trace flag of the CPU.(Thanks to Tara Keeling for causing its discovery.)It seems that in months of testing of Mini vMac 3.5, I neverused Macsbug. Stepping through code (with Command-S orCommand-T) doesn&rsquo;t work properly. An optimization to themain cpu emulation loop isn&rsquo;t valid when the trace flag getsset. I found a way to fix it which doesn&rsquo;t change theoptimized main loop, but just the code before andafter. But it can change the timing of other kinds of interruptsby one instruction, potentially causing subtle differences in behavioranywhere. So I don&rsquo;t plan to put this fix in stable Mini vMac 3.5,it needs more extensive testing.</p><p>I&rsquo;ve added a blinking busy indicator to the status barin <a href="../minivmac/extras/gsgwrite/index.html">GSgWrite</a>.This is partly to reassure the user that it is working, butmostly it is to tell the AutoSlow feature of Mini vMac that it isworking. So that documentation doesn&rsquo;t need to sayto turn off AutoSlow. (Other tools will be updated later toinclude this code.)</p><p>On further consideration, I&rsquo;ve decided to backtrackand say that GSgWrite, SigCheck, SigWrite, and MakeKeys arestill in Alpha, not in Beta, because of not being satisfied withthe format for public and secret keys. They are currently usinga format that is sort of compatible with PGP, but not actually whatPGP would ever produce. For multiple reasons, I&rsquo;m thinkingit would be better to define a GRY format for keys, and then haveone set of tools that only deal with GRY format keys (and work withGRY format signatures), and also have anotherset that uses the PGP semi compatible format that is currently used(and work only with PGP format signatures).I have defined the GRY keys format, and have code that implementsthem. Tools using this code will come soon.</p><p> ------ </p><p>Thanks to Chris Hanson, Steven Stepanek, Hendrik Cyrus,Mike Keller, Jeremy W Karpenske, Joseph Oswald,and Arnaud Abbatifor <a href="../wishlist/index.html">sponsoring</a>about one month of web hosting for the Gryphel projectand over 4 days of health insurance.</p><p><a name="n180304"> <b>March 4, 2018</b> </a>- <a href="nva7.html#n180304">permanent link</a></p><p><a href="../minivmac/extras/sigcheck/index.html">SigCheck</a>,<a href="../minivmac/extras/sigwrite/index.html">SigWrite</a>,<a href="../minivmac/extras/gsgwrite/index.html">GSgWrite</a>, and<a href="../minivmac/extras/makekeys/index.html">MakeKeys</a>are updated again, to fix an issue with the keyboard shortcut forthe Host Copy command not working in System 6 and before. Theyhave also been made generally more robust in System 6 and earlier,in protecting against desk accessories doing odd things. Also, theynow work on a Mac 128K.</p><p><a href="../minivmac/extras/makerand/index.html">MakeRand</a>has been updated to use the current editing code used in the othertools.</p><p>And finally, in today&rsquo;s Mini vMac<a href="../minivmac/alpha.html">Development</a>source snapshot, the build system is updated to use the same currentediting window code. This includes the Cut/Copy/Paste commandsthat use the Host Clipboard, a working Undo command, and someother improvements.</p><p><a name="n180225"> <b>February 25, 2018</b> </a>- <a href="nva7.html#n180225">permanent link</a></p><p>There are new versions of <a href="../minivmac/extras/sigcheck/index.html">SigCheck</a>,<a href="../minivmac/extras/sigwrite/index.html">SigWrite</a>,<a href="../minivmac/extras/gsgwrite/index.html">GSgWrite</a>, and<a href="../minivmac/extras/makekeys/index.html">MakeKeys</a>,which are now declared to be in Beta (instead of Alpha).</p><p>The error reporting is a bit better, aborting with command-periodcan now work, and the user interface is now generally responsivewhen the programs are busy.</p><p>If you are checking a lot of signed messages with the samepublic key, you can put the key in a file named "pub_key.txt" inthe same folder as the SigCheck application, and it will usethat instead of asking for it.</p><p>Similarly, if you sign a lot of messages with the same secretkey, you put the key in a file named "sec_key.txt" inthe same folder as the SigWrite or GSgWrite applications,and it will use that instead of asking for it.</p><p><a name="n180218"> <b>February 18, 2018</b> </a>- <a href="nva7.html#n180218">permanent link</a></p><p><a href="../minivmac/extras/gsgwrite/index.html">GSgWrite</a>is a new tool for writing digital signatures that is verysimilar to<a href="../minivmac/extras/sigwrite/index.html">SigWrite</a>,except that it uses a different signature format.<a href="../minivmac/extras/sigcheck/index.html">SigCheck</a>has been updated to handle this new format. (Also SigWritehas been updated to include recent improvements inthe text editing window code from SigCheck.)</p><p>The main difference in GSgWrite from SigWrite is that when a messagecontaining a public key, or even a nested signed message, is signed withGSgWrite, the signed message contains the exact same text withoutmodification. The PGP format created by SigWrite is designed to beread in one pass from beginning to end, so some kinds of text couldcause confusion and have to be modified. The &ldquo;GRY&rdquo;format created by GSgWrite is designed to be scanned backwardsfrom the end to find the end of the message body.</p><p>This makes the GRY format incompatible with the PGP format. Andsince it is incompatible anyway, some further changes were made.</p><p>First, the GRY format is a bit more compact. For a 1024 bit key, thebody of the GRY signature is always exactly 3 lines of 64 characterseach.Second, the GRY format format attempts to mitigate known weaknesses inthe md5 checksum by including a second md5 checksum, of the same datawith the bytes in reverse order. Even if someone finds a practical wayto generate a file with a given md5 checksum, finding a file that alsohas the second checksum right is likely to be more difficult.(The size of thesignature depends on the size of the key, not on the size ofthe digest. A larger digest is fine as long as it is smaller than thekey.)Also, CRC-24 checksums for both orders are included in the digest, sincecode for CRC-24 is already there (used for protecting the signature bodyagainst accidental corruption).</p><p><a name="n180211"> <b>February 11, 2018</b> </a>- <a href="nva7.html#n180211">permanent link</a></p><p>Today&rsquo;s<a href="../minivmac/extras/sigcheck/index.html">SigCheck 0.4.0</a>now has a working Undo command, since I was in the area ofthe editing code. Again, this will later be added to all theother Mini vMac extras which share this code for an editing window.</p><p>Also in this version, it finds the end of the message that is signedby scanning backwards from the end of the text. Which wouldallow most anything to be in the signed message without modification,such as a public key or a nested signed message. But this would beincompatible with MacPGP, so I will define another signed message formatto allow this, in the near future.</p><p> ------ </p><p>Thanks to Justin Williams, Rienk Koolstra, Marcin Rusinowski, Leo ETognella, Jonathan Heiman, and Grafico Freelancerfor <a href="../wishlist/index.html">sponsoring</a>about one month of web hosting for the Gryphel projectand 6 days of health insurance.</p><p><a name="n180204"> <b>February 4, 2018</b> </a>- <a href="nva7.html#n180204">permanent link</a></p><p>Today&rsquo;s<a href="../minivmac/extras/sigcheck/index.html">SigCheck 0.3.0</a>,when run in Mini vMac, adds commands to the Edit menu that operatewith the clipboard of the real computer instead of the emulatedMac. They have keyboard shortcuts that use the Option key. SoCommand-Option-V will paste the clipboard of the real computer intoSigCheck. This simplifies using SigCheck, as ClipIn is not needed.</p><p>This feature will later be added to the other digital signaturetools, and also the Mini vMac build system, and also otherMini vMac extras, which all share code for an editing window.</p><p><a name="n180128"> <b>January 28, 2018</b> </a>- <a href="nva7.html#n180128">permanent link</a></p><p>The<a href="../var/index.html">Mini vMac Variations Service</a>now signs the md5 checksum and other information for generatedvariations. (Automated signing was the reason for the lengthyexcursion into digital signatures.)</p><p>The Variations Service has its own new signing key,with its own new page:<a href="../keys/k2.html">Gryphel Key 2</a>. Thereis also a new page for the main Gryphel Project Key, at<a href="../keys/k1.html">Gryphel Key 1</a>. This page also haslinks to copies of key placed elsewhere on the web, to helpverify that it is correct.</p><p><a name="n180121"> <b>January 21, 2018</b> </a>- <a href="nva7.html#n180121">permanent link</a></p><p><a href="../minivmac/extras/makerand/index.html">MakeRand</a>is a new tool for making random hexadecimal data, to beused with <a href="../minivmac/extras/makekeys/index.html">MakeKeys</a>.So the digital signature tools (also including<a href="../minivmac/extras/sigwrite/index.html">SigWrite</a>)should now be usable.(<a href="../minivmac/extras/sigcheck/index.html">SigCheck</a>was already usable, for checking signed messages found on thiswebsite.)But these tools arestill under development.</p><p><a name="n180114"> <b>January 14, 2018</b> </a>- <a href="nva7.html#n180114">permanent link</a></p><p><a href="../minivmac/extras/sigwrite/index.html">SigWrite</a>is a new tool for writing digital signatures that can beverified with<a href="../minivmac/extras/sigcheck/index.html">SigCheck</a>(which has been updated).<a href="../minivmac/extras/makekeys/index.html">MakeKeys</a>is a new tool for making secret and public keys to be used withSigWrite and SigCheck.These tools are regular Macintosh applications,unlike last week&rsquo;s MPW tools to do the same thing.These tools are still under development and may have differentbehavior when finished.</p><p>One missing piece is a tool to generate truly random hex datato be used as input to MakeKeys. I'll adapt more code from MacPGP,which looks at the timing of key presses, to make such a toolsoon.</p><p><a name="n180107"> <b>January 7, 2018</b> </a>- <a href="nva7.html#n180107">permanent link</a></p><p>There are new versions of<a href="../minivmac/extras/sigwrttl/index.html">SigWrtTl</a>and<a href="../minivmac/extras/mkkeystl/index.html">MkKeysTl</a>,two MPW tools which are still under development.The source code is being cleaned up to match previous work on<a href="../minivmac/extras/sigcheck/index.html">SigCheck</a>and<a href="../minivmac/extras/sigchktl/index.html">SigChkTl</a>,which in the process has served as code review, finding a numberof things to fix.</p><p><a name="n171231"> <b>December 31, 2017</b> </a>- <a href="nva7.html#n171231">permanent link</a></p><p><a href="../minivmac/extras/sigwrttl/index.html">SigWrtTl</a>and<a href="../minivmac/extras/mkkeystl/index.html">MkKeysTl</a>are two new MPW tools. They are stillunder development. Regular Macintosh applications todo the same thing should follow.SigWrtTl writes digital signaturesthat can be verified with<a href="../minivmac/extras/sigcheck/index.html">SigCheck</a>,<a href="../minivmac/extras/sigchktl/index.html">SigChkTl</a>,or MacPGP. MkKeysTl makes secret and public keys to be used withSigWrtTl and the verifying tools.</p><p>Also to come is a tool for making a file a random bytes forusing with MkKeysTl. I decided to split random byte generationfrom MkKeysTl so as to make MkKeysTl much easier to test.</p><p><a name="n171224"> <b>December 24, 2017</b> </a>- <a href="nva7.html#n171224">permanent link</a></p><p>Last week&rsquo;s<a href="../minivmac/extras/sigcheck/index.html">SigCheck</a>alpha is only the first of a planned trio. The second isa tool to sign a message, and the third to create a private/publickey pair. Hopefully the next two should go faster from alreadybeing familiar with the MacPGP source. Also, as I remove unneededcode from MacPGP, I&rsquo;m leaving code for both signing and keygeneration in as long as possible, rather than going throughthis process from scratch three times.</p><p>SigCheck can&rsquo;t be finished until the other two utilities are done,because in some circumstances I want to use a slightly differentformat for signed messages than MacPGP does. In particular, whenthe signed message contains a public key. MacPGP allows readingseveral signed messages in a single file, and it reads the filelinearly, so to reliably find the end of a signed message, somesequences of characters are not allowed in the body. So a publickey gets modified a bit. SigCheck assumes there is onlya single signed message, and could be changed to scan backwardsfrom the end, so anything can be allowed in the body, such asan unmodified public key. For a balance of simplicity andcompatibility, I think my signing tool will usually write MacPGPformat, but if that would require modifying the body, it woulduse a different format, so the body remains unmodified.</p><p><a name="n171217"> <b>December 17, 2017</b> </a>- <a href="nva7.html#n171217">permanent link</a></p><p><a href="../minivmac/extras/sigcheck/index.html">SigCheck</a>is a new tool for checking the signed checksums on this website.It is still under development, but seems to work.(It is regular Macintosh application,unlike last week&rsquo;s SigChkTl MPW tool.)</p><p><a name="n171210"> <b>December 10, 2017</b> </a>- <a href="nva7.html#n171210">permanent link</a></p><p><a href="../minivmac/extras/sigchktl/index.html">SigChkTl</a>is a new command line tool for Macintosh Programmer&rsquo;s Workshopfor checking the signed checksums on this website. It is stillunder development. A regular Macintosh application todo the same thing should follow.</p><p><a name="end">:</a></p><p><a href="nva6.html">Older News</a>(<a href="index.html">Index</a>)</p><hr><div><i> <a href="../../index.html">www.gryphel.com</a>/c/<a href="index.html">news</a>/nva7- <a href="../feedback.html">feedback</a> </i></div></body></html>