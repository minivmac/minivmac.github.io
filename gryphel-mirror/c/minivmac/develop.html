<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><title> Options for Developers in Mini vMac </title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="canonical" href="develop.html"></head><body><div><i> <a href="../../index.html">www.gryphel.com</a>/c/<a href="index.html">minivmac</a>/develop- <a href="../feedback.html">feedback</a> </i></div><hr><h3 align=center>	Mini vMac</h3><h3 align=center>	Options for Developers</h3><hr><p>This page lists compile time options useful to people who wishto develop or maintain Mini vMac. The main<a href="options.html">Options</a> page has options of interestto everyone else. The<a href="../var/index.html">Variations Service</a>does not permit these developer options.</p><p>First see the <a href="build.html">Build</a> page tolearn how to compile Mini vMac.</p><h4> <a name="in"> ... Options Index ... </a> </h4><p><a href="develop.html#option_maintainer"><i>{Beta} Maintainer Name</i></a></p><p><a href="develop.html#option_homepage"><i>{Beta} Home Page</i></a></p><p><a href="develop.html#option_e"><i>{Beta} Development Environment</i></a></p><p><a href="develop.html#option_ev"><i>{Beta} Development Environment Version</i></a></p><p><a href="develop.html#option_cl"><i>{Beta} Use Command Line</i></a></p><p><a href="develop.html#option_scr"><i>{Beta} Scripting Language</i></a></p><p><a href="develop.html#option_af"><i>{Beta} Use All Files</i></a></p><p><a href="develop.html#option_l"><i>{Beta} Print File List</i></a></p><p><a href="develop.html#option_pvo"><i>{Beta} Print Variation Name</i></a></p><p><a href="develop.html#option_pvn"><i>{Beta} Print Variation Options</i></a></p><p><a href="develop.html#option_n">Variation Name</a></p><p><a href="develop.html#option_an">Abbreviated Name</a></p><p><a href="develop.html#option_intl">International Characters</a></p><p><a href="develop.html#option_t">Target</a></p><p><a href="develop.html#option_m">Model</a></p><p><a href="develop.html#option_cpu">CPU</a></p><p><a href="develop.html#option_api">API</a></p><p><a href="develop.html#option_snd_api">Sound API</a></p><p><a href="develop.html#option_d">Debugging Level</a></p><p><a href="develop.html#option_vsync">Vertical synchronization</a></p><p><a href="develop.html#option_at">End of Developer Options</a></p><p> : </p><p> <a name="option_maintainer"> <b> <i>{Beta} Maintainer Name </i> </b> </a> </p><p> <i>If you are going to distribute the version ofMini vMac that you compile to other people, youshould specify the maintainer name with a linelike this:</i> </p><pre>-maintainer "Your name here"</pre><p> <i>If you don't specify this option, the maintainername defaults to &ldquo;unknown&rdquo;.</i> </p><p> <a name="option_homepage"> <b> <i>{Beta} Home Page </i> </b> </a> </p><p> <i>If you are going to distribute the version ofMini vMac that you compile to other people,and you have a webpage for it, you shouldspecify the webpage with:</i> </p><pre>-homepage "Your webpage here"</pre><p> <i>This string is displayed by the About command of Mini vMac.If you don't specify this option, the homepage defaults to&ldquo;(none)&rdquo;.</i> </p><p> <a name="option_e"> <b> <i>{Beta} Development Environment </i> </b> </a> </p><pre>-e xcd { Apple Xcode }-e msv { Microsoft Visual C++ }-e mpw { Macintosh Programmers Workshop }-e mw8 { Metrowerks CodeWarrior }-e bgc { Gnu tools }-e lcc { lcc-win32 - Jacob Navia }-e dvc { Bloodshed Dev-C++ }-e mgw { MinGW }-e cyg { Cygwin }-e snc { Sun tools }-e dmc { Digital Mars Compiler }-e plc { Pelles C Compiler }-e dkp { devkitpro }-e ccc { Generic command line c compiler }-e mvc { Mini vMac C (a specific version of gcc) }</pre><blockquote>	<p> <i>	Mini vMac C is just the set of compilers that is	used to build official binaries. Currently it is a set	of GCC cross compilers and supporting files built with	gcc-4.7.4, gmp-4.3.2, mpfr-2.4.2, mpc-0.8.1, and mingw-w64-v4.0.6.	</i> </p></blockquote><p> <a name="option_ev"> <b> <i>{Beta} Development Environment Version </i> </b> </a> </p><pre>-ev 1000 { Apple Xcode 1.0 }-ev 1500 { Apple Xcode 1.5 }-ev 2100 { Apple Xcode 2.1 }-ev 2200 { Apple Xcode 2.2 }-ev 2210 { Apple Xcode 2.2.1 }-ev 2300 { Apple Xcode 2.3 }-ev 2400 { Apple Xcode 2.4 }-ev 2410 { Apple Xcode 2.4.1 }-ev 3100 { Apple Xcode 3.1 }-ev 4000 { Apple Xcode 4.0 }-ev 4630 { Apple Xcode 4.6.3 }-ev 6200 { Apple Xcode 6.2 }-ev 6320 { Apple Xcode 6.3.2 }-ev 6400 { Apple Xcode 6.4 }-ev 7310 { Apple Xcode 7.3.1 }-ev 8210 { Apple Xcode 8.2.1 }-ev 9410 { Apple Xcode 9.4.1 }-ev 12100 { Apple Xcode 12.1 }-ev 12300 { Apple Xcode 12.3 }-ev 6000 { Microsoft Visual C++ 6.0 }-ev 7000 { Microsoft Visual Studio .NET 2002 }-ev 7100 { Microsoft Visual Studio .NET 2003 }-ev 8000 { Microsoft Visual Studio 2005 }-ev 9000 { Microsoft Visual Studio 2008 }-ev 10000 { Microsoft Visual Studio 2010 }-ev 11000 { Microsoft Visual Studio 2012 }-ev 12000 { Microsoft Visual Studio 2013 }-ev 14000 { Microsoft Visual Studio 2015 }-ev 15000 { Microsoft Visual Studio 2017 }<i>{Beta} -ev 16000 { Microsoft Visual Studio 2019 }</i></pre><p> <a name="option_cl"> <b> <i>{Beta} Use Command Line </i> </b> </a> </p><pre>-cl { use command line tools }</pre><p> <i>For Apple Xcode, Microsoft Visual C++, and lcc-win32, this optiongenerates a makefile for use with the command linetools, instead of project file for the IDE.</i> </p><p> <a name="option_scr"> <b> <i>{Beta} Scripting Language </i> </b> </a> </p><p> <i>The configuration tool outputs a single script file. Executingthis script generates all the configuration files. You can choose whatscripting language is used with lines such as:</i> </p><pre>-scr mpw { Macintosh Programmers Workshop }-scr aps { AppleScript }-scr bsh { bash (default) }-scr vbs { VBScript }-scr xps { XP }</pre><p> <a name="option_af"> <b> <i>{Beta} Use All Files </i> </b> </a> </p><p> <i>The configuration tool normally arranges that only source files neededfor the current user options are compiled. This option causes allfiles to be compiled, which works because the source files themselvescontain preprocessor conditionals to skip the unwanted code.This option also causes inclusion of all API header files andlink libraries that could be needed for any set of user options,rather than only what is needed for the current user options.</i> </p><p> <i>This option can be useful when creating an external port based offa supported configuration. The files of an external port needto work for any set of user options.</i> </p><pre>-af { enable Use All Files }</pre><p> <a name="option_l"> <b> <i>{Beta} Print File List </i> </b> </a> </p><p> <i>The configuration tool can generate a list of source files neededfor the chosen options, when enabled by this line:</i> </p><pre>-l { Enable Print File List }</pre><p> <a name="option_pvn"> <b> <i>{Beta} Print Variation Name </i> </b> </a> </p><p> <i>The configuration tool can generate a file containing the nameof the Variation, when enabled by this line:</i> </p><pre>-pvn 1 { Enable Print Variation Name }</pre><p> <i>If you set the Variation Name with the<a href="develop.html#option_n">-n option</a>,that is what gets printed.</i> </p><p> <a name="option_pvo"> <b> <i>{Beta} Print Variation Options </i> </b> </a> </p><p> <i>The configuration tool can generate a file containing the chosenoptions, when enabled by this line:</i> </p><pre>-pvo 1 { Enable Print Variation Options }</pre><p> <i>The printed options are in canonical form, unaffected by the orderof the input options, and options set to the default value areomitted. Developer options are also omitted.</i> </p><p> <a name="option_n"> <b> Variation Name </b> </a> </p><p> If you compile a custom version of Mini vMac,you can label it with a line such as: </p><pre>-n "minivmac-3.0.0-custom"</pre><p> This string is displayed by the Aboutcommand of Mini vMac, and is also usedas the name of the archive exported bythe build system. </p><p> <a name="option_an"> <b> Abbreviated Name </b> </a> </p><p> Instead of specifying the whole variationname, you can just specify the abbreviated name,with a line such as: </p><pre>-an mnvm0001</pre><p> The version number and platform partsof the variation name are automatically generated.The abbreviatedname must be 8 characters or less, and should only includelowercase letters, numbers, and underscores. </p><p> <a name="option_intl"> <b> International Characters </b> </a> </p><pre>-intl</pre><p> This option forces Mini vMac to supportinternational characters in the user interface, even when using thedefault English. This is useful if the maintainer name needsthe extra characters. (It would be nicer for the build systemto figure out for itself what character set is needed. Butthis will do for now.) </p><p> <a name="option_t"> <b> Target </b> </a> </p><p> Some additional options for target thatare not officially supported: </p><pre>-t xgen { Generic X11 }-t mppc { Macintosh OS 9 and earlier - PowerPC }-t m68k { Macintosh - 680x0 }-t mfpu { Macintosh - 68020+ with FPU }-t carb { Macintosh CarbonLib OSX/OS 8.6+ }-t ob64 { OpenBSD on x86-64 }-t obsd { OpenBSD on x86-32 }-t db64 { Dragonfly BSD on x86-64 }-t dbsd { Dragonfly BSD on x86-32 }-t mx11 { X11 for Macintosh OS X - PowerPC }-t mi11 { X11 for Macintosh OS X - Intel }-t mx64 { X11 for Macintosh OS X - x86-64 }-t cygw { Cygwin/X for Microsoft Windows }-t fbpc { FreeBSD on PowerPC }-t slrs { Solaris - SPARC }-t sl86 { Solaris - Intel }-t wc86 { Pocket PC - Intel (Emulator) }-t irix { IRIX - MIPS }-t ndsa { Nintendo DS - ARM }-t minx { Minix 3.2 }<i>{Beta} -t port { Port : don't generate platform/compiler files }</i></pre><p> <a name="option_m"> <b> Model </b> </a> </p><p> Some additional options for model thatare not officially supported: </p><pre>-m Twiggy { Macintosh prototype }-m Twig43 { Macintosh prototype }-m PB100 { Macintosh PowerBook 100 }</pre><p>The Twiggy emulation (by Mat&#283;j Hybler) allows use ofthe ROM from a Macintosh prototype that has a Twiggy floppy drive(used in the original Lisa computer), instead of the Sonydrive that the Macintosh 128K ended up shipping with.Except for the disk driver, the ROMs are nearly identical,except most everything is shifted to somewhat differentaddresses. Probably because the trap patching technique used inMacintosh System Software tends to depend on exact locationsof routines in ROM, no System Software that shipped willrun with the Twiggy ROM. There are two known disk imagesthat will work with it, one with an early version ofMacWrite and one with an early version of MacPaint.However these image don't currently work as is inthe Twiggy Mac emulation. Mat&#283;j Hybler figured out asmall patch to their boot block code to make them work,that disables some sort of check for the disk being bootable.This might be needed because the emulation is still usinga replacement disk driver that is trying to imitate thedata structures in memory used  by theSony disk driver, while the Twiggy disk driver hassignificantly different data structures. (With this patch,these two disk images will also work fine in the Macintosh128K emulation.)</p><p>The Twig43 emulation (also by Mat&#283;j Hybler) allows useof an even earlier ROM (which near the end of the ROM contains thestring &ldquo;ROM4.3T 07/04/83&rdquo;). This ROM is moresignificantly different. Oddy though, it can use the early MacPaintand MacWrite images without modification.</p><p>There is some code for PowerBook 100 emulation, but it does not yetget very far in booting.</p><p> <a name="option_cpu"> <b> CPU </b> </a> </p><p> The build system normally determines the CPU and operatingsystem from the target (-t) you have specified. If a targetdoesn't yet exist for the combination of CPU and operatingsystem you desire, you can select a target for that operatingsystem and a different CPU, and then override the CPU witha line such as: </p><pre>-cpu 68k { 680x0 }-cpu ppc { PowerPC }-cpu x86 { Intel 32 bit }-cpu x64 { Intel 64 bit }-cpu spr { sparc }-cpu arm { ARM }<i>{Beta} -cpu a64 { ARM 64 bit }</i>-cpu mip { MIPS }-cpu gen { generic }</pre><p> It might or might not compile correctly, but it at least providesa starting point. </p><p> <a name="option_api"> <b> API </b> </a> </p><p> The build system normally determines the appropriate API(Application Programming Interface) from the target (-t)you have specified. You can override this choice with linessuch as: </p><pre>-api mac { Macintosh OS }-api osx { Carbon for Macintosh OS X }-api cco { Cocoa for Macintosh OS X }-api win { Microsoft Windows 32 }-api xwn { X Window System }-api gtk { GTK+ (GIMP Toolkit) }-api sdl { <a href="https://www.libsdl.org/download-1.2.php">Simple DirectMedia Layer</a> 1.2 }-api sd2 { <a href="http://www.libsdl.org">Simple DirectMedia Layer</a> 2.0 }</pre><p> One useful use of this option isto specify '-api gtk' for a linux target (overridingthe default '-api xwn'). This getsa menu bar and file dialogs, but loses other featuressince this port is incomplete. </p><p> <a name="option_snd_api"> <b> Sound API </b> </a> </p><p> The build system normally determines the appropriateSound API from the target (-t) you have specified.You can override this choice with lines such as: </p><pre>-snd-api alsa { Advanced Linux Sound Architecture }-snd-api ddsp { Open Sound System and compatible }</pre><p> Currently the only useful use of this option isto specify '-snd-api ddsp' for a linux target(overriding the default '-snd-api alsa'). </p><p> <a name="option_d"> <b> Debugging Level </b> </a> </p><pre>-d d { debug }-d t { test }-d s { ship }</pre><pre>-log 1 { enable logging infrastructure }</pre><p>Logging won't do much without further enabling or creating code to logvarious events that you are currently interested in.</p><pre>-dis 1 { enable disassembler }</pre><p>Besides disassembling a number of instructions executed after an eventof interest, it can disassemble instructions prior to the event, as theemulator can save the addresses of instruction executed to a circularbuffer. Requires the "-log" option. Nothing much will happen withoutfurther enabling or creating code to log various events that you arecurrently interested in.</p><p> <a name="option_vsync"> <b> Vertical synchronization </b> </a> </p><p> <b> bug </b> : This isn't working correctly in Full ScreenMode, at least in OS X 10.6.8, and so is not supportedfor this version, at least. </p><pre>-vsync 1 (<a href="var/mnvm0159.html">mnvm0159</a>)</pre><p> Currently for OS X only, this option turns on OpenGLdouble buffering and sets AGL_SWAP_INTERVAL to 1. This eliminates the"tearing" issues noted by Manuel Alfayate. Unfortunatelyit isn't yet a real solution, it is more to help illustratethe issue before coming up with a better implementation.(See<a href="extras/testsync/index.html">testsync</a>.)Besides using much morememory, it also reduces the maximum speed of emulationunpredictably and erratically, because it makesaglSwapBuffers block until the vertical retrace,when Mini vMac is expecting to give the emulationextra time, for above "1x" speed. </p><p> <a name="option_at"> <b> End of Developer Options </b> </a> </p><pre>@ { no more developer options }</pre><p>If this option is present, then no developer options are permittedto the right of this option.The<a href="../var/index.html">Variations Service</a>uses this to forbid developer options.</p><p> : </p><p> If you find Mini vMac useful, please consider<a href="../help/index.html">helping the Gryphel Project</A>.</p><a href="../../index.html"><img src="../../d/gryphel-32.gif" width=32 height=32 border=0	alt="gryphel logo, 1K"></a><p> Next - <b><a href="setupcfg.html">Setup Tool Configuration</a></b> </p><hr><div><i> <a href="../../index.html">www.gryphel.com</a>/c/<a href="index.html">minivmac</a>/develop- <a href="../feedback.html">feedback</a> </i><br>copyright (c) 2020 Paul C. Pratt - last update 12/9/2020</div></body></html>